Aqu√≠ tienes una gu√≠a detallada paso a paso para resolver la **Pr√°ctica 4.2: Copias de seguridad y recuperaci√≥n en AWS RDS**, basada en el documento que has subido.

---

# Gu√≠a Paso a Paso: Pr√°ctica 4.2 - Estrategias de Backup y Recuperaci√≥n en AWS

Esta pr√°ctica est√° dise√±ada para que domines las diferentes formas de proteger tus datos en AWS, desde snapshots manuales hasta planes de backup automatizados con AWS Backup.

---

### üõ†Ô∏è Tareas Previas: Preparaci√≥n del Entorno

Antes de empezar con los backups, necesitas crear la infraestructura. El enunciado pide usar la l√≠nea de comandos (AWS CLI).

**1. Crear la Base de Datos RDS (B√°sica)**
Ejecuta el siguiente comando en tu terminal (o CloudShell).

* **Nota:** Cambia `<instance-name>` por un nombre √∫nico (ej: `rds-tuNombre`).

```bash
aws rds create-db-instance \
--db-instance-identifier <instance-name> \
--db-instance-class db.t3.micro \
--engine mysql \
--allocated-storage 20 \
--master-username admin \
--master-user-password adminadmin \
--backup-retention-period 0 \
--no-multi-az \
--publicly-accessible

```

 (El periodo de retenci√≥n 0 desactiva los backups autom√°ticos inicialmente).

**2. Crear Buckets S3**
Crea dos buckets. Cambia `<bucket-name>` por algo √∫nico (ej: `mibucket-tunombre-01`).

```bash
aws s3api create-bucket --bucket <bucket-name>

```

**3. Crear Instancias EC2**
Primero obt√©n la ID de la imagen (AMI) y luego lanza las instancias.

```bash
# Obtener AMI
aws ec2 describe-images --owners amazon --filters "Name=name,Values=amzn2-ami-hvm-2.0.*-x86_64-gp2" --query "Images | sort_by(@, &CreationDate)[-1].ImageId" --output text

# Lanzar 2 instancias (Sustituye ami-XXXXXXXX por la que te dio el comando anterior)
aws ec2 run-instances --image-id ami-XXXXXXXX --instance-type t2.micro --count 2

```

---

### üì∏ Parte 1: Instant√°neas Manuales (Snapshots)

**Objetivo:** Crear una "foto" manual de tu base de datos y restaurarla.

**Pasos:**

1. Ve a la consola de **RDS** > **Databases**.
2. Selecciona tu instancia.
3. Arriba a la derecha, **Actions** > **Take snapshot**.
4. Ponle un nombre (ej: `snapshot-manual-practica`).
5. Espera a que en la secci√≥n **Snapshots** aparezca como "Available" (Disponible).
6. **Restaurar:** Selecciona esa snapshot > **Actions** > **Restore snapshot**.
7. Configura la nueva instancia:
* Dale un nuevo identificador (ej: `rds-restaurada`).
* Elige el tama√±o (`db.t3.micro`).


8. Dale a restaurar.

üì∑ **CAPTURAS OBLIGATORIAS:**

1. 
**Captura de la snapshot creada:** Donde se vea el nombre y el estado "Available".


2. 
**Captura de la instancia restaurada:** El panel de bases de datos mostrando ambas instancias (la original y la copia).



üí° **Ayuda para las preguntas:**

* *¬øSustituye a la original?* No, crea una instancia nueva con otra direcci√≥n (endpoint).
* 
*¬øCu√°ndo son √∫tiles?* Antes de hacer cambios peligrosos (deployments) o para guardar el estado indefinidamente (no caducan solas).



---

### ‚è±Ô∏è Parte 2: Backups Autom√°ticos y Point-In-Time Recovery (PITR)

**Objetivo:** Activar las copias autom√°ticas y "viajar en el tiempo" para recuperar la BD a un segundo exacto.

**Pasos:**

1. **Activar Backups:**
* Selecciona tu instancia original > **Modify**.
* En "Backup", cambia el **Retention period** a **7 d√≠as** (o m√°s de 0).
* Marca **Enable automated backups**.
* Dale a **Continue** > **Apply Immediately**.


2. **Simular actividad:** Con√©ctate a la BD y haz alg√∫n cambio (crear una tabla o borrar algo), o simplemente espera unos minutos para que haya "tiempo" que recuperar.
3. **Restaurar (PITR):**
* Selecciona la instancia > **Actions** > **Restore to point in time**.
* Elige **Latest restaurable time** o **Custom** (elige una hora concreta antes de tu "desastre").
* Ponle nombre a la nueva instancia (ej: `rds-pitr-recovery`).
* Lanza la restauraci√≥n.



üì∑ **CAPTURAS OBLIGATORIAS:**

1. 
**Configuraci√≥n de backups:** Pantalla de modificaci√≥n donde se vea "Retention period: 7 days".


2. 
**Proceso PITR:** Pantalla donde eliges la fecha/hora exacta para restaurar.



üí° **Ayuda para las preguntas:**

* 
*Diferencia con Snapshot:* La snapshot es una foto fija; el PITR permite elegir cualquier segundo exacto gracias a los logs de transacciones .



---

### üõ°Ô∏è Parte 3: AWS Backup (Plan Centralizado)

**Objetivo:** Usar el servicio AWS Backup para gestionar copias de forma centralizada.

**Pasos:**

1. Ve al servicio **AWS Backup**.
2. **Crear Plan:** "Create Backup Plan" > "Build a new plan".
3. Ponle nombre (ej: `Plan-Diario`).
4. **Configura la regla:**
* Frecuencia: **Daily** (Diaria).
* Retenci√≥n: **14 d√≠as** (o lo que prefieras).


5. **Asignar Recursos:**
* Ve a "Resource assignments".
* Elige **Include specific resource types**.
* Selecciona `RDS` y busca tu base de datos manualmente.



üì∑ **CAPTURAS OBLIGATORIAS:**

1. 
**Backup Plan:** Pantalla con el resumen de tu plan creado.


2. 
**Backup Ejecutado:** En la secci√≥n "Jobs" o "Recovery points", una captura que muestre un backup completado (puedes forzar uno con "Create on-demand backup" si no quieres esperar a ma√±ana).



---

### üè∑Ô∏è Parte 4: Backups Inteligentes por Etiquetas (Tags)

**Objetivo:** Que AWS haga backup autom√°ticamente de *cualquier* cosa que tenga una etiqueta espec√≠fica (ej: "Proteger=S√≠").

**Pasos:**

1. **Etiquetar Recursos:**
* Ve a una EC2, a tu RDS y a un bucket S3.
* En la pesta√±a **Tags**, a√±ade:
* Key: `Backup` (o `Entorno`)
* Value: `Yes` (o `Produccion`)


* Deja otros recursos SIN esa etiqueta.


2. **Crear Plan por Etiquetas:**
* Crea un nuevo Backup Plan (o edita el anterior).
* En "Resource assignment", elige **Assign resources using tags**.
* Pon la condici√≥n: Key `Backup` Equals `Yes`.


3. **Verificaci√≥n:**
* Espera un poco y mira en **"Protected resources"** dentro de AWS Backup. Deber√≠an aparecer autom√°ticamente todos los que etiquetaste.



üì∑ **CAPTURAS OBLIGATORIAS:**

1. 
**Recursos Etiquetados:** Captura de la consola (EC2 o RDS) mostrando la pesta√±a Tags.


2. 
**Plan con Etiquetas:** Captura de la configuraci√≥n del plan donde se ve la condici√≥n de la etiqueta.


3. 
**Recovery Points:** Captura final mostrando que se han hecho copias de varios tipos de recursos (EC2, S3, RDS).



**Ejercicio Adicional:** Crea un volumen EBS o un EFS nuevo, ponle la etiqueta y comprueba si AWS Backup lo detecta solo.

üí° **Ayuda para las preguntas:**

* 
*Ventaja:* No tienes que editar el plan de backup cada vez que creas un servidor nuevo; solo le pones la etiqueta y listo.


* 
*Riesgo:* Si escribes mal la etiqueta ("Bacup" en vez de "Backup"), el recurso se queda sin protecci√≥n.



---

### üìù Parte 5: Reflexi√≥n Final

Para cerrar la pr√°ctica, debes escribir un breve texto comparando:

1. **Snapshots:** Buenas para momentos puntuales (antes de un cambio).
2. **Autom√°ticos RDS:** Imprescindibles para recuperar datos recientes (PITR).
3. **AWS Backup:** Lo mejor para empresas grandes, ya que centraliza EC2, S3, RDS y DynamoDB en un solo lugar y permite auditor√≠a.

Espero que esta gu√≠a te sirva para completar tu pr√°ctica. ¬°√Ånimo!